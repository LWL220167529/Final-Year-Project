<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
        var inputData;
        document.addEventListener("DOMContentLoaded", function () {
            var input = document.getElementById("city");
            if (input) {
                input.oninput = function () {
                    childRows = document.getElementById("productlist")
                    childRows.innerHTML = "";
                    var value = input.value;
                    if (value == "") {
                        return
                    }
                    fetch("http://159.223.94.246:5000/estimatePlace?city=" + value)
                        .then((response) => response.json())
                        .then((data) => {
                            inputData = value;
                            for (var i = 0; i < data.length; i++) {
                                var obj = data[i];
                                var option = document.createElement("option");
                                option.label = obj.message;
                                option.value = obj.key;
                                document.getElementById("productlist").appendChild(option);
                            }
                        });
                };
            }
        });
        function get(){
            return inputData;
        }
    </script>
  </head>
  <body>
    <input type="text" list="productlist" id="city" name="city" placeholder="City" />
    <datalist id="productlist"></datalist>
    <button onclick="alert(document.getElementById('city').value+'\n'+get())">Click me</button>
  </body>
</html>
